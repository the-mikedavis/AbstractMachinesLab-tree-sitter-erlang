================================================================================
macro usage
================================================================================

?MY_MACRO

--------------------------------------------------------------------------------

(source_file
  (expr_macro_application
    (variable)))

================================================================================
macro application
================================================================================

?MY_MACRO(2)
?MY_MACRO(2, [1])
?MY_MACRO(2, [1], ?MY_MACRO_EXTRA)

--------------------------------------------------------------------------------

(source_file
  (expr_macro_application
    (variable)
    (integer))
  (expr_macro_application
    (variable)
    (integer)
    (expr_list
      (integer)))
  (expr_macro_application
    (variable)
    (integer)
    (expr_list
      (integer))
    (expr_macro_application
      (variable))))

================================================================================
macro definition
================================================================================

-define(ASM_CACHE_KEY(Module, Checksum),
        {?MODULE, asm_cache, Module, Checksum}).
-define(Const, Replacement).
-define(MACRO1(X, Y), {a, X, b, Y}).
-define(assertStandaloneFun(Expression),
        ?assertMatch(#standalone_fun{}, ?make_standalone_fun(Expression))).

--------------------------------------------------------------------------------

(source_file
  (macro_declaration
    (variable)
    (pattern
      (variable))
    (pattern
      (variable))
    (tuple
      (expr_macro_application
        (variable))
      (atom)
      (variable)
      (variable)))
  (macro_declaration
    (variable)
    (variable))
  (macro_declaration
    (variable)
    (pattern
      (variable))
    (pattern
      (variable))
    (tuple
      (atom)
      (variable)
      (atom)
      (variable)))
  (macro_declaration
    (atom)
    (pattern
      (variable))
    (expr_macro_application
      (atom)
      (record
        (atom))
      (expr_macro_application
        (atom)
        (variable)))))
